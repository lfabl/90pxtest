{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\Works\\\\customer\\\\nextjs-blog\\\\pages\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport Head from 'next/head';\nimport api from '../server';\nimport { API_KEY, HOST } from '../constants';\nimport { container as style_container, safeSpace as style_safeSpace, footerSpace as style_footerSpace } from './index.module.css';\nimport Layout from '../layout';\nimport Welcome from '../components/welcome';\nimport Toolbox from '../components/toolbox';\nimport CardSlider from '../components/cardSlider';\nimport FilmCard from '../components/filmCard';\nimport { asyncForEach } from '../helpers';\nimport GlobalState, { useGlobalState } from '../context';\nexport default function Home() {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState(),\n      popularFilms = _useState[0],\n      setPopularFilms = _useState[1];\n\n  var _useState2 = useState(null),\n      err = _useState2[0],\n      setErr = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      toolBoxSearchValue = _useState3[0],\n      setToolBoxSearchValue = _useState3[1];\n\n  var _useGlobalState = useGlobalState(),\n      _useGlobalState2 = _slicedToArray(_useGlobalState, 2),\n      globalState = _useGlobalState2[0],\n      setGlobalState = _useGlobalState2[1];\n\n  useEffect(function () {\n    var mainParameters = {\n      apikey: API_KEY,\n      type: 'movie',\n      r: 'json',\n      s: 'abe' // Apinin imdb point üzerinde arama bölümü olmadığı için kendim salladım bu kısmı.\n\n    };\n    var mainQuery = new URLSearchParams(mainParameters);\n    api({\n      url: HOST + '?' + mainQuery\n    }).then( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(res) {\n        var _myFavorites, fullyData;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(res.Response === 'True')) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                _myFavorites = JSON.parse(localStorage.getItem('myFavorites'));\n                console.log('MyFavorites:', _myFavorites);\n                fullyData = [];\n                _context2.next = 6;\n                return asyncForEach(res.Search, /*#__PURE__*/function () {\n                  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(item) {\n                    var itemParameters, itemQuery, response, itemData;\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            itemParameters = {\n                              apikey: API_KEY,\n                              plot: 'short',\n                              type: 'movie',\n                              r: 'json',\n                              i: item.imdbID\n                            };\n                            itemQuery = new URLSearchParams(itemParameters);\n                            _context.next = 4;\n                            return api({\n                              url: HOST + '?' + itemQuery\n                            });\n\n                          case 4:\n                            response = _context.sent;\n                            itemData = JSON.parse(JSON.stringify(response));\n                            itemData.favorite = _myFavorites ? _myFavorites.findIndex(function (e) {\n                              return e === itemData.imdbID;\n                            }) !== -1 : false;\n                            fullyData.push(itemData);\n\n                          case 8:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }));\n\n                  return function (_x2) {\n                    return _ref2.apply(this, arguments);\n                  };\n                }());\n\n              case 6:\n                setPopularFilms(fullyData);\n                _context2.next = 10;\n                break;\n\n              case 9:\n                setErr({\n                  message: res['Error']\n                });\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }())[\"catch\"](function (err) {\n      alert(err.message);\n    });\n  }, []);\n\n  var setFavoriteState = function setFavoriteState(imdbID) {\n    if (JSON.parse(localStorage.getItem(\"myFavorites\"))) {\n      var _myFavorites2 = JSON.parse(localStorage.getItem('myFavorites'));\n\n      if (_myFavorites2.findIndex(function (e) {\n        return e === imdbID;\n      }) === -1) {\n        _myFavorites2.push(imdbID);\n      } else {\n        _myFavorites2 = _myFavorites2.filter(function (e) {\n          return e !== imdbID;\n        });\n      }\n\n      localStorage.setItem(\"myFavorites\", JSON.stringify(_myFavorites2));\n      setGlobalState({\n        myFavorites: _myFavorites2\n      });\n    } else {\n      localStorage.setItem(\"myFavorites\", JSON.stringify([imdbID]));\n      setGlobalState({\n        myFavorites: myFavorites\n      });\n    }\n  };\n\n  return __jsx(GlobalState, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 3\n    }\n  }, __jsx(\"div\", {\n    className: style_container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 4\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 6\n    }\n  }, \"Create Next App\"), __jsx(\"link\", {\n    rel: \"icon\",\n    href: \"/favicon.ico\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 6\n    }\n  }), __jsx(\"meta\", {\n    name: \"viewport\",\n    content: \"width=device-width, initial-scale=1.0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 4\n    }\n  })), __jsx(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, __jsx(Welcome, {\n    title: \"Welcome to MovieUP.\",\n    content: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris \",\n    toolbox: __jsx(Toolbox, {\n      button: {\n        label: \"Search\",\n        props: {\n          variant: \"contained\",\n          color: \"primary\"\n        }\n      },\n      search: {\n        value: toolBoxSearchValue,\n        onChange: function onChange(e) {\n          return setToolBoxSearchValue(e.target.value);\n        }\n      },\n      year: {\n        key: \"toolboxYear\",\n        id: \"dropdown-item-button\",\n        title: \"Year\",\n        data: [{\n          value: \"Any\",\n          \"default\": true\n        }, {\n          value: \"2019\"\n        }, {\n          value: \"2020\"\n        }]\n      },\n      type: {\n        key: \"toolboxType\",\n        id: \"dropdown-item-button\",\n        title: \"Type\",\n        data: [{\n          value: \"Any\",\n          \"default\": true\n        }, {\n          value: \"Series\"\n        }, {\n          value: \"Movie\"\n        }, {\n          value: \"Episode\"\n        }]\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 16\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 6\n    }\n  }), __jsx(\"div\", {\n    className: style_safeSpace,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 6\n    }\n  }), popularFilms && popularFilms.length ? __jsx(CardSlider, {\n    title: \"Popular Movies\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 8\n    }\n  }, popularFilms.map(function (film, filmIndex) {\n    return __jsx(FilmCard, {\n      imdbID: film.imdbID,\n      index: filmIndex,\n      title: film.Title,\n      image: film.Poster,\n      content: film.Plot,\n      imdbPoint: film.imdbRating,\n      key: \"film-\" + filmIndex,\n      year: film.Year,\n      favorite: film.favorite,\n      setFavoriteState: setFavoriteState,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 18\n      }\n    });\n  })) : err ? err.message : 'Yükleniyor...', __jsx(\"div\", {\n    className: style_footerSpace,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 6\n    }\n  })))));\n}\n\n_s(Home, \"ybqrIoa5NWsQxkxf7eJ7JP6mPdQ=\", false, function () {\n  return [useGlobalState];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["D:/Works/customer/nextjs-blog/pages/index.js"],"names":["useEffect","useState","Head","api","API_KEY","HOST","container","style_container","safeSpace","style_safeSpace","footerSpace","style_footerSpace","Layout","Welcome","Toolbox","CardSlider","FilmCard","asyncForEach","GlobalState","useGlobalState","Home","popularFilms","setPopularFilms","err","setErr","toolBoxSearchValue","setToolBoxSearchValue","globalState","setGlobalState","mainParameters","apikey","type","r","s","mainQuery","URLSearchParams","url","then","res","Response","myFavorites","JSON","parse","localStorage","getItem","console","log","fullyData","Search","item","itemParameters","plot","i","imdbID","itemQuery","response","itemData","stringify","favorite","findIndex","e","push","message","alert","setFavoriteState","filter","setItem","label","props","variant","color","value","onChange","target","key","id","title","data","length","map","film","filmIndex","Title","Poster","Plot","imdbRating","Year"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport Head from 'next/head';\nimport api from '../server';\nimport { API_KEY, HOST } from '../constants';\nimport {\n\tcontainer as style_container,\n\tsafeSpace as style_safeSpace,\n\tfooterSpace as style_footerSpace\n} from './index.module.css';\nimport Layout from '../layout';\nimport Welcome from '../components/welcome';\nimport Toolbox from '../components/toolbox';\nimport CardSlider from '../components/cardSlider';\nimport FilmCard from '../components/filmCard';\nimport {\n\tasyncForEach\n} from '../helpers';\nimport GlobalState, { useGlobalState } from '../context';\n\nexport default function Home() {\n\tconst [popularFilms, setPopularFilms] = useState();\n\tconst [err, setErr] = useState(null);\n\tconst [toolBoxSearchValue, setToolBoxSearchValue] = useState(\"\");\n\tconst [globalState, setGlobalState] = useGlobalState();\n\tuseEffect(() => {\n\t\tconst mainParameters = {\n\t\t\tapikey: API_KEY,\n\t\t\ttype: 'movie',\n\t\t\tr: 'json',\n\t\t\ts: 'abe' // Apinin imdb point üzerinde arama bölümü olmadığı için kendim salladım bu kısmı.\n\t\t};\n\t\tconst mainQuery = new URLSearchParams(mainParameters);\n\t\tapi({\n\t\t\turl: HOST + '?' + mainQuery\n\t\t})\n\t\t.then(async (res) => {\n\t\t\tif (res.Response === 'True') {\n\t\t\t\tconst myFavorites = JSON.parse(localStorage.getItem('myFavorites'));\n\t\t\t\tconsole.log('MyFavorites:', myFavorites);\n\t\t\t\tlet fullyData = [];\n\t\t\t\tawait asyncForEach(res.Search, async (item) => {\n\t\t\t\t\tconst itemParameters = {\n\t\t\t\t\t\tapikey: API_KEY,\n\t\t\t\t\t\tplot: 'short',\n\t\t\t\t\t\ttype: 'movie',\n\t\t\t\t\t\tr: 'json',\n\t\t\t\t\t\ti: item.imdbID\n\t\t\t\t\t}\n\t\t\t\t\tconst itemQuery = new URLSearchParams(itemParameters);\n\t\t\t\t\tconst response = await api({\n\t\t\t\t\t\turl: HOST + '?' + itemQuery\n\t\t\t\t\t});\n\t\t\t\t\tlet itemData = JSON.parse(JSON.stringify(response));\n\t\t\t\t\titemData.favorite = myFavorites ? myFavorites.findIndex(e => e === itemData.imdbID) !== -1 : false;\n\t\t\t\t\tfullyData.push(itemData);\n\t\t\t\t});\n\t\t\t\tsetPopularFilms(fullyData);\n\t\t\t} else {\n\t\t\t\tsetErr({\n\t\t\t\t\tmessage: res['Error']\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t\t.catch((err) => {\n\t\t\talert(err.message);\n\t\t});\n\t}, []);\n\tconst setFavoriteState = (imdbID) => {\n\t\tif(JSON.parse(localStorage.getItem(\"myFavorites\"))) {\n\t\t\tlet myFavorites = JSON.parse(localStorage.getItem('myFavorites'));\n\t\t\tif(myFavorites.findIndex(e => e === imdbID) === -1) {\n\t\t\t\tmyFavorites.push(imdbID);\n\t\t\t} else {\n\t\t\t\tmyFavorites = myFavorites.filter(e => e !== imdbID);\n\t\t\t}\n\t\t\tlocalStorage.setItem(\"myFavorites\", JSON.stringify(myFavorites));\n\t\t\tsetGlobalState({\n\t\t\t\tmyFavorites: myFavorites\n\t\t\t});\n\t\t} else {\n\t\t\tlocalStorage.setItem(\"myFavorites\", JSON.stringify([imdbID]));\n\t\t\tsetGlobalState({\n\t\t\t\tmyFavorites: myFavorites\n\t\t\t});\n\t\t}\n\t}\n\treturn <GlobalState>\n\t\t<Layout>\n\t\t\t<div className={style_container}>\n\t\t\t\t<Head>\n\t\t\t\t\t<title>Create Next App</title>\n\t\t\t\t\t<link rel=\"icon\" href=\"/favicon.ico\" />\n\t\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\n\t\t\t\t</Head>\n\t\t\t\t<main>\n\t\t\t\t\t<Welcome\n\t\t\t\t\t\ttitle=\"Welcome to MovieUP.\"\n\t\t\t\t\t\tcontent=\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris \"\n\t\t\t\t\t\ttoolbox={<Toolbox\n\t\t\t\t\t\t\tbutton={{\n\t\t\t\t\t\t\t\tlabel: \"Search\",\n\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\tvariant: \"contained\",\n\t\t\t\t\t\t\t\t\tcolor: \"primary\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tsearch={{\n\t\t\t\t\t\t\t\tvalue: toolBoxSearchValue,\n\t\t\t\t\t\t\t\tonChange: (e) => setToolBoxSearchValue(e.target.value)\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tyear={{\n\t\t\t\t\t\t\t\tkey: \"toolboxYear\",\n\t\t\t\t\t\t\t\tid: \"dropdown-item-button\",\n\t\t\t\t\t\t\t\ttitle: \"Year\",\n\t\t\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tvalue: \"Any\",\n\t\t\t\t\t\t\t\t\t\tdefault: true\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tvalue: \"2019\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tvalue: \"2020\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttype={{\n\t\t\t\t\t\t\t\tkey: \"toolboxType\",\n\t\t\t\t\t\t\t\tid: \"dropdown-item-button\",\n\t\t\t\t\t\t\t\ttitle: \"Type\",\n\t\t\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tvalue: \"Any\",\n\t\t\t\t\t\t\t\t\t\tdefault: true\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tvalue: \"Series\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tvalue: \"Movie\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tvalue: \"Episode\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className={style_safeSpace}></div>\n\t\t\t\t\t{\n\t\t\t\t\t\tpopularFilms && popularFilms.length ?\n\t\t\t\t\t\t\t<CardSlider\n\t\t\t\t\t\t\t\ttitle=\"Popular Movies\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpopularFilms.map((film, filmIndex) => {\n\t\t\t\t\t\t\t\t\t\treturn <FilmCard\n\t\t\t\t\t\t\t\t\t\t\timdbID={film.imdbID}\n\t\t\t\t\t\t\t\t\t\t\tindex={filmIndex}\n\t\t\t\t\t\t\t\t\t\t\ttitle={film.Title}\n\t\t\t\t\t\t\t\t\t\t\timage={film.Poster}\n\t\t\t\t\t\t\t\t\t\t\tcontent={film.Plot}\n\t\t\t\t\t\t\t\t\t\t\timdbPoint={film.imdbRating}\n\t\t\t\t\t\t\t\t\t\t\tkey={\"film-\"+filmIndex}\n\t\t\t\t\t\t\t\t\t\t\tyear={film.Year}\n\t\t\t\t\t\t\t\t\t\t\tfavorite={film.favorite}\n\t\t\t\t\t\t\t\t\t\t\tsetFavoriteState={setFavoriteState}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</CardSlider>\n\t\t\t\t\t\t: err ? err.message : 'Yükleniyor...'\n\t\t\t\t\t}\n\t\t\t\t\t<div className={style_footerSpace}></div>\n\t\t\t\t</main>\n\t\t\t</div>\n\t</Layout>\n  </GlobalState>\n}\n"]},"metadata":{},"sourceType":"module"}